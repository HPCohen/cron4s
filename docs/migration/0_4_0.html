<html><head><title>Cron4s</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Antonio Alonso Dominguez" /><meta name="description" content="Scala CRON Parser" /><meta name="og:image" content="/cron4s/img/poster.png" /><meta name="og:title" content="Cron4s" /><meta name="og:site_name" content="Cron4s" /><meta name="og:url" content="https://alonsodomin.github.io/cron4s" /><meta name="og:type" content="website" /><meta name="og:description" content="Scala CRON Parser" /><link rel="icon" type="image/png" href="/cron4s/img/favicon.png" /><meta name="twitter:title" content="Cron4s" /><meta name="twitter:image" content="https://alonsodomin.github.io/cron4simg/poster.png" /><meta name="twitter:description" content="Scala CRON Parser" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/cron4s/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/cron4s/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/cron4s/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/cron4s/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/cron4s/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/cron4s/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/cron4s/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/cron4s/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/cron4s/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/cron4s/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/cron4s/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/cron4s/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/cron4s/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/cron4s/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/cron4s/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/cron4s/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/cron4s/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/cron4s/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/cron4s/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/cron4s/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/cron4s/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/cron4s/css/style.css" /><link rel="stylesheet" href="/cron4s/css/palette.css" /><link rel="stylesheet" href="/cron4s/css/codemirror.css" /><link rel="stylesheet" href="/cron4s/css/kazari-style.css" /><link rel="stylesheet" href="/cron4s/css/monokai.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/cron4s/" class="brand"><div class="brand-wrapper"><span>Cron4s</span></div></a></li> <li><a href="/cron4s/docs/index.html" class="">First steps</a></li> <li><a href="/cron4s/docs/whats_new.html" class="">What's New?</a></li> <li><a href="/cron4s/docs/time_usage.html" class="">Working with Time</a> <ul class="sub_section"> <li><a href="/cron4s/docs/time_usage/matching.html" class="">Matching</a></li> <li><a href="/cron4s/docs/time_usage/forward_backwards.html" class="">Forwards & Backwards</a></li></ul></li> <li><a href="/cron4s/docs/builtin_libs.html" class="">Built-in libs</a></li> <li><a href="/cron4s/docs/custom_datetime.html" class="">Custom DateTime</a></li> <li><a href="/cron4s/api/index.html" class="">API Docs</a></li> <li><a href="/cron4s/" class="">Migration Guides</a> <ul class="sub_section"> <li><a href="/cron4s/docs/migration/0_4_0.html" class="">0.3.x -> 0.4.x</a></li> <li><a href="/cron4s/docs/migration/0_3_0.html" class="">0.2.x -> 0.3.0</a></li></ul></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/alonsodomin/cron4s"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/alonsodomin/cron4s"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('Cron4s Scala CRON Parser');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('Cron4s Scala CRON Parser');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="alonsodomin" data-github-repo="cron4s"><div class="content-wrapper"><section><h2 id="migrating-from-040-to-041">Migrating From 0.4.0 to 0.4.1</h2>

<p>Only those that have created their own custom datetime library integrations need to do any kind of work migration work.</p>

<h3 id="custom-datetime-integration-changes">Custom DateTime Integration Changes</h3>

<p>Prior to 0.4.1, the <code class="highlighter-rouge">set</code> method in the <code class="highlighter-rouge">IsDateTime</code> typeclass had a <code class="highlighter-rouge">Option[DateTime]</code> return type. Implementors should
 return a <code class="highlighter-rouge">Some(...)</code> if assigning the new value to the given field succeeded and a <code class="highlighter-rouge">None</code> otherwise. This covered two
 possible cases: 1) Unsupported fields by the <code class="highlighter-rouge">DateTime</code> representation and 2) Assigning an invalid value to given field.</p>

<p>In 0.4.1 the signature has changed to return a <code class="highlighter-rouge">Either[DateTimeError, DateTime]</code>. Implementors must now return a
 <code class="highlighter-rouge">Right(...)</code> when assigning the new value succeeds and in case of failures they must choose one of the following:</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">cron4s.datetime.UnsupportedField</code>: For signalling the fact that the given field is not supported by the <code class="highlighter-rouge">DateTime</code>
representation.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">cron4s.datetime.InvalidFieldValue</code>: For signalling the fact that the field is supported but given value can not be
assigned to the given field.</p>
  </li>
</ul>

<p>Please, review the documentation at <a href="https://alonsodomin.github.io/cron4s/docs/custom_datetime.html">Custom DateTimes</a>.</p>

<h2 id="migrating-from-03x-to-040">Migrating From 0.3.x to 0.4.0</h2>

<p>The path from 0.3.x version to 0.4.0 has some rough edges due to some small changes in the public API.</p>

<h3 id="ast-changes">AST Changes</h3>

<p>Cron4s 0.4.0 comes (finally) with support for using <code class="highlighter-rouge">?</code> symbols in the <em>day of month</em> and <em>day of week</em> fields. This
 also means that the ast node that represents those fields has a type that is different from other ones. This prevents
 the programmatically creation of cron expressions using that symbol in fields where it is illegal.</p>

<p>The bad thing is that code that this breaks the binary compatibility of between 0.4.0 and previous 0.3.x and code that
 was accessing the fields themselves will need to be re-compiled.</p>

<h3 id="breaking-api-changes">Breaking API Changes</h3>

<p>These are the most notable changes in Cron4s that will require users to update their code to be able to use this version.</p>

<h4 id="node-step-semantic-changes">Node Step Semantic Changes</h4>

<p>The semantics of the operations <code class="highlighter-rouge">step</code>, <code class="highlighter-rouge">next</code> and <code class="highlighter-rouge">prev</code> have slightly changed their semantics in 0.4.0. The key
 difference will be observed when the result of stepping over a field does not alter the field value; in such a case
 the <code class="highlighter-rouge">step</code> and related methods will return a <code class="highlighter-rouge">None</code>, meaning that there was no valid result.</p>

<h4 id="jsr-310-unification">JSR-310 Unification</h4>

<p>Support for JSR-310 (the <em>Java Time API</em>), which was split between the packages <code class="highlighter-rouge">cron4s.lib.javatime</code> in the JVM and
 the package <code class="highlighter-rouge">cron4s.lib.threetenbp</code> in ScalaJS, has been unified in both platforms using the former package name.
 That means that ScalaJS code that was using the JSR-310 backport should change now to <code class="highlighter-rouge">cron4s.lib.javatime</code> and
 everything should work the same way.</p>

<blockquote>
  <p><strong>Note</strong>: JSR-310 support in ScalaJS is not yet final but itâ€™s mature enough to be used. This change removes the
burden of dealing with two separate namespaces for the same APIs.</p>
</blockquote>

<h4 id="joda-time-module">Joda Time Module</h4>

<p>Joda Time is support is no longer included in the core module, it has been moved to the <code class="highlighter-rouge">cron4s-joda</code> module. To 
 continue using it you must include this last module among your dependencies:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>libraryDependencies += "com.github.alonsodomin.cron4s" %% "cron4s-joda" % "x.y.z"
</code></pre>
</div>

<h4 id="field-access-from-expressions">Field access from expressions</h4>

<p>The generic field access method named <code class="highlighter-rouge">field</code> has changed its signature. The change comes motivated by the new AST node
 and basically because in the previous version there was some awful runtime casting going on. The old and new signatures
 are as follows:</p>

<p>Old signature:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="n">field</span><span class="o">[</span><span class="kt">F</span> <span class="k">&lt;:</span> <span class="kt">CronField</span><span class="o">](</span><span class="k">implicit</span> <span class="n">unit</span><span class="k">:</span> <span class="kt">CronUnit</span><span class="o">[</span><span class="kt">F</span><span class="o">])</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">FieldNode</span><span class="o">[</span><span class="kt">F</span><span class="o">]]</span>
</code></pre>
</div>

<p>New signature:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="n">field</span><span class="o">[</span><span class="kt">F</span> <span class="k">&lt;:</span> <span class="kt">CronField</span><span class="o">](</span><span class="k">implicit</span> <span class="n">selector</span><span class="k">:</span> <span class="kt">FieldSelector</span><span class="o">[</span><span class="kt">CronExpr</span>, <span class="kt">F</span><span class="o">])</span><span class="k">:</span> <span class="kt">selector.Out</span><span class="o">[</span><span class="kt">F</span><span class="o">]</span>
</code></pre>
</div>

<p>The new signature looks more complex than the previous one and sort of returns a magic type out of that implicit <code class="highlighter-rouge">selector</code>.
 However it comes with a big benefit:</p>

<p>The return type is now calculated at compile time and will return the right type for the given field or the code wonâ€™t 
 compile. No need to work with the resulting <code class="highlighter-rouge">Option</code> anymore.</p>

<h4 id="scalaz-vs-cats">Scalaz VS Cats</h4>

<p>Previous versions of <code class="highlighter-rouge">cron4s</code> were using <a href="http://www.scalaz.org">Scalaz</a> internally as a foundation for some of the
 common abstractions used to implement the core functionality. In 0.4.0 Scalaz has been replaced by
 <a href="http://www.typelevel.org/cats">Cats</a> for exactly the same purpise. Cats is more lightweight than Scalaz and provides
 better integration with the Scala standard library.</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/cron4s/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script>((window.gitter = {}).chat = {}).options = {
room: 'alonsodomin/cron4s'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/cron4s/js/main.js"></script><script src="/cron4s/js/kazari.js"></script><script>
$(document).ready(function() {
	kazari.KazariPlugin().decorateCode('https://scala-evaluator-212.herokuapp.com/eval', 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.S2F6YXJp.Jl2eqMfw8IakJF93PjxTbrf-8YUJgX5OoOfy5JHE8Yw', '', 'monokai')
})
    </script></body></html>